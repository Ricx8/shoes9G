<!DOCTYPE html>
<html>
	<head>
		<title></title>

		<link rel="stylesheet" href="leaflet/leaflet.css">
		<link rel="stylesheet" href="getLocation.css">
		<script type="text/javascript" src="jquery-3.3.1.min.js"></script>
		<script src="leaflet/leaflet.js"></script>
		<script>
			$(document).ready(function(){
				console.log("Hello");
			});
		</script>
	</head>
	<body>
		<div id="mainMap"></div>

		<script>
			var map = L.map('mainMap').setView([40.660302, -73.866782], 15);

			/*
				Dark theme: https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png
				https://leaflet-extras.github.io/leaflet-providers/preview/
			*/
			L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
			    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
			}).addTo(map);

			var mainMarker = L.marker([0, 0]).addTo(map);

			setInterval(function(){
			    $.ajax({
					type: "POST",
					url: "getLocation.php",
					async: false,
					//data: {table : "farmers"},
					success: function(r){
						jsonR = jQuery.parseJSON(r);
						
						map.setView([jsonR[4][1], jsonR[4][2]]);
						mainMarker.setLatLng([jsonR[4][1], jsonR[4][2]]);
						//L.marker([jsonR[4][1], jsonR[4][2]]).addTo(map);
					}
				});
			}, 1000);
		</script>
	</body>
</html>